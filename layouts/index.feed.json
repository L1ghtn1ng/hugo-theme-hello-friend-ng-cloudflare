{{- $index := slice -}}
{{- range where .Site.RegularPages "Type" "posts" -}}
    {{- $index = $index | append (dict 
        "title" .Title 
        "permalink" .Permalink 
        "date" (.Date.Format "2006-01-02") 
        "summary" (cond (ne .Summary "") .Summary .Description)
        "tags" .Params.tags
        "readingTime" .ReadingTime
        "author" (cond (isset .Params "author") (cond (kindIs "map" .Params.author) .Params.author.name .Params.author) (default "John Doe" .Site.Params.Author))
    ) -}}
{{- end -}}
{{- $index | jsonify -}}